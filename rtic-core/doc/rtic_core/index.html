<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This is a re-usable crate that captures the hardware agnostic proc-macro logic for RTIC’s tasks and resources syntax model (both single and multicore syntax). I.e the user code parsing, analysis and generation for hardware tasks, local resources, shared resources and their locking mechanism, system init and idle tasks."><title>rtic_core - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="rtic_core" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../rtic_core/index.html">rtic_core</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">rtic_core</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/rtic_core/lib.rs.html#1-157">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This is a re-usable crate that captures the <strong>hardware agnostic</strong> proc-macro logic for RTIC’s tasks and resources syntax model (both single and multicore syntax). I.e the user code parsing, analysis and generation for hardware tasks, local resources, shared resources and their locking mechanism, system init and idle tasks.</p>
<p>In addition, this crate provides utilities for building the actual RTIC crate (known as an <strong>RTIC distribution</strong>) that exports the RTIC framework attribute procedural macro for a specific target hardware architecture. Further more, the same utilizes allow extending the <strong>core syntax</strong> provided by this crate through the concept of <strong>Compilation passes</strong>. As a result, this crate is not meant to be used directly by users who want to write RTIC applications, instead it is used by <strong>RTIC distribution</strong> implementors.</p>
<h4 id="rtic-compilation-passes"><a class="doc-anchor" href="#rtic-compilation-passes">§</a>RTIC Compilation passes</h4>
<p>TODO: compilation pass definition<br />
proc-macro like implementations
TODO: compilation pass trait<br />
TODO: the core pass trait provided by this crate</p>
<h4 id="rtic-distributions"><a class="doc-anchor" href="#rtic-distributions">§</a>RTIC distributions</h4><h5 id="definition"><a class="doc-anchor" href="#definition">§</a>Definition</h5>
<p>An RTIC distribution is a rust crate that exposes the RTIC attribute proc-macro <strong>implemented for a specific hardware architecture, or for a specific micro-controller, or even for a specific target use case (with non-standard syntax)</strong>. For example, we could have a distribution for single core cortex-m devices, another distribution specifically tailored for the multicore RP2040, a distribution for risc-v architecture … etc. </p>
<p>The responsibility for a distribution crate is to:</p>
<ol>
<li>Implement the <strong>low level hardware specific</strong> details and provide/bind that to the hardware agnostic <strong>RTIC compilation passes</strong>.</li>
<li>Integrate a selection of <strong>compatible</strong> Compilation passes and optionally expose them to the user as a set of <strong>features</strong> which the user can select to enable.</li>
<li>Expose the RTIC proc macro generated by <code>RticMacroBuilder</code> after performing the previous two steps</li>
</ol>
<p><img src="https://github.com/zakimadaoui/rtic-mc-experiments/blob/main/modular_arch.white.png?raw=true" alt="stack" /></p>
<p>Distributions allow the RTIC code-base growth more controllable and provides an alternative approach to the older approach in which all the hardware specific details all belong to a single crate maintained by the RTIC team, and users choose an implementation for some specific hardware is chosen by enabling a corresponding rust feature for their target hardware. </p>
<h5 id="how-to-implement-a-distribution-using-rtic_corerticmacrobuilder"><a class="doc-anchor" href="#how-to-implement-a-distribution-using-rtic_corerticmacrobuilder">§</a>How to implement a distribution using <code>rtic_core::RticMacroBuilder</code>?</h5>
<p>todo: provide short example and link to template distro</p>
<h4 id="guidelines-for-implementing-new-distributions-links-and-link-to-template-distribution"><a class="doc-anchor" href="#guidelines-for-implementing-new-distributions-links-and-link-to-template-distribution">§</a>Guidelines for implementing new distributions, links, and link to template distribution</h4>
<p>TODO…</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="errors/index.html" title="mod rtic_core::errors">errors</a></div></li><li><div class="item-name"><a class="mod" href="multibin/index.html" title="mod rtic_core::multibin">multibin</a></div></li><li><div class="item-name"><a class="mod" href="parse_utils/index.html" title="mod rtic_core::parse_utils">parse_utils</a></div><div class="desc docblock-short">Provides a utility to streamline parsing and manipulating and reconstructing the tokenstream representation of the #[app(arg1=“val1”, …)] attribute</div></li><li><div class="item-name"><a class="mod" href="rtic_functions/index.html" title="mod rtic_core::rtic_functions">rtic_functions</a></div></li><li><div class="item-name"><a class="mod" href="rtic_traits/index.html" title="mod rtic_core::rtic_traits">rtic_traits</a></div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Analysis.html" title="struct rtic_core::Analysis">Analysis</a></div></li><li><div class="item-name"><a class="struct" href="struct.App.html" title="struct rtic_core::App">App</a></div></li><li><div class="item-name"><a class="struct" href="struct.AppArgs.html" title="struct rtic_core::AppArgs">AppArgs</a></div><div class="desc docblock-short">Arguments provided to the #[app(…)] macro attribute, this includes paths to PACs, number of cores, and peripherals option.</div></li><li><div class="item-name"><a class="struct" href="struct.RticMacroBuilder.html" title="struct rtic_core::RticMacroBuilder">RticMacroBuilder</a></div><div class="desc docblock-short">This should be used to compose an <strong>RTIC distribution</strong>. In other words, it allows building the RTIC <strong>app</strong> macro
By providing the necessary low-level hardware bindings and binding additional <strong>Compilation Passes</strong>
in the case syntax extensions are desired.</div></li><li><div class="item-name"><a class="struct" href="struct.SubAnalysis.html" title="struct rtic_core::SubAnalysis">SubAnalysis</a></div></li><li><div class="item-name"><a class="struct" href="struct.SubApp.html" title="struct rtic_core::SubApp">SubApp</a></div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.CorePassBackend.html" title="trait rtic_core::CorePassBackend">CorePassBackend</a></div><div class="desc docblock-short">Interface for providing the low-level hardware bindings specific for a target(s) (A.k.a The Backend) to be used during code generation phase
of the *<em>Core Compilation Pass</em>.</div></li><li><div class="item-name"><a class="trait" href="trait.RticPass.html" title="trait rtic_core::RticPass">RticPass</a></div><div class="desc docblock-short">A trait that allows defining a <strong>Compilation Pass</strong>.</div></li></ul></section></div></main></body></html>